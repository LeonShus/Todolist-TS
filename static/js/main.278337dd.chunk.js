(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{100:function(t,e,a){t.exports=a(129)},105:function(t,e,a){},106:function(t,e,a){},129:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),c=a(27),i=a.n(c);a(105),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(106);var r,l=a(13),s=a(85),u=a.n(s),d=a(175),f=a(185),m=a(170),p=o.a.memo((function(t){var e=Object(n.useState)(""),a=Object(l.a)(e,2),c=a[0],i=a[1],r=Object(n.useState)(""),s=Object(l.a)(r,2),p=s[0],O=s[1],E=function(){c.trim()?(t.addItem(c.trim()),i(""),O("")):O("Incorrect value")};return o.a.createElement("div",{className:u.a.cont},o.a.createElement(d.a,{variant:"standard",onKeyPress:function(t){"Enter"===t.key&&E()},onChange:function(t){i(t.currentTarget.value),O("")},value:c,error:!!p,helperText:p,sx:{minWidth:"198px"}}),o.a.createElement(f.a,{onClick:E,color:"primary",disabled:t.disabled},o.a.createElement(m.a,null)))})),O=a(88),E=a.n(O),b=a(186),T=o.a.memo((function(t){var e=t.title,a=t.callBack,c=t.textStyle,i=Object(n.useState)(e),r=Object(l.a)(i,2),s=r[0],u=r[1],f=Object(n.useState)(!1),m=Object(l.a)(f,2),p=m[0],O=m[1],T=function(){a(s),O(!1)};return o.a.createElement(o.a.Fragment,null,p?o.a.createElement(d.a,{autoFocus:!0,variant:"standard",onKeyPress:function(t){"Enter"===t.key&&T()},onChange:function(t){u(t.currentTarget.value)},onBlur:T,type:"text",value:s}):o.a.createElement(b.a,{variant:c,component:"span",className:E.a.spanStyle,onDoubleClick:function(){return O(!0)},sx:{flexGrow:1}},e))})),I=a(183),S=a(184),j=a(173),g=a(15),v=a(179),y=a(177),L=a(89),k=a.n(L),h=a(172),C=a(23),A=a(14),D=a(4),x=a(90),w=a.n(x).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"099be23b-024b-4d04-8aea-ded1a22de046"}}),N=function(){return w.get("todo-lists")},P=function(t){return w.post("todo-lists",{title:t})},R=function(t){return w.delete("todo-lists/".concat(t))},_=function(t,e){return w.put("todo-lists/".concat(t),{title:e})},H=function(t){return w.get("todo-lists/".concat(t,"/tasks"))},K=function(t,e){return w.post("todo-lists/".concat(t,"/tasks"),{title:e})},U=function(t,e){return w.delete("todo-lists/".concat(t,"/tasks/").concat(e))},F=function(t,e,a){return w.put("todo-lists/".concat(t,"/tasks/").concat(e),a)};!function(t){t[t.complete=0]="complete",t[t.error=1]="error",t[t.captcha=10]="captcha"}(r||(r={}));var G,B,M={status:"idle",error:null},V=function(t){return{type:"APP/SET-STATUS",status:t}},W=function(t){return{type:"APP/SET-ERROR",error:t}},Y=function(t,e){e.messages.length?t(W(e.messages[0])):t(W("Some error occured"))},z=[],J=function(t,e){return{type:"CHANGE-TODOLIST-ENTITY-STATUS",todolistId:t,entityStatus:e}};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(G||(G={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgent=3]="Urgent",t[t.Later=4]="Later"}(B||(B={}));var Q={},q=function(t,e,a){return function(n){n(V("loading")),F(t,e,a).then((function(t){t.data.resultCode===r.complete?n({type:"CHANGE-TASK-TITLE",task:t.data.data.item}):Y(n,t.data)})).catch((function(t){n(W(t.massage))})).finally((function(){n(V("idle"))}))}},$=o.a.memo((function(t){var e=Object(C.b)();return o.a.createElement(v.a,{key:t.taskId,className:"".concat(t.status?k.a.status:""),disablePadding:!0,divider:!0,sx:{pl:"16px"}},o.a.createElement(y.a,{onChange:function(a){var n=a.currentTarget.checked?G.Completed:G.New;e(q(t.todoListId,t.taskId,Object(g.a)(Object(g.a)({},t.taskForUpdateParam),{},{status:n})))},checked:t.status===G.Completed}),o.a.createElement(T,{title:t.title,callBack:function(a){e(q(t.todoListId,t.taskId,Object(g.a)(Object(g.a)({},t.taskForUpdateParam),{},{title:a})))}}),o.a.createElement(f.a,{onClick:function(){return e((a=t.todoListId,n=t.taskId,function(t){t(V("loading")),t(J(a,"loading")),U(a,n).then((function(e){e.data.resultCode===r.complete?t(function(t,e){return{type:"REMOVE-TASK",taskId:e,todoListId:t}}(a,n)):Y(t,e.data)})).catch((function(e){t(W(e.massage))})).finally((function(){t(V("idle")),t(J(a,"idle"))}))}));var a,n}},o.a.createElement(h.a,null)))})),X=a(187),Z=a(188),tt=o.a.memo((function(t){var e=t.filter,a=t.filteredTasks;return console.log("ButtonFilterLine"),o.a.createElement(X.a,{size:"small",variant:"outlined"},o.a.createElement(Z.a,{color:"all"===e?"secondary":"primary",onClick:function(){return a("all")}},"All"),o.a.createElement(Z.a,{color:"active"===e?"secondary":"primary",onClick:function(){return a("active")}},"Active"),o.a.createElement(Z.a,{color:"completed"===e?"secondary":"primary",onClick:function(){return a("completed")}},"Completed"))})),et=o.a.memo((function(t){console.log("TODOLIST");var e=Object(C.b)();Object(n.useEffect)((function(){var a;e((a=t.todoListId,function(t){t(V("loading")),H(a).then((function(e){t(function(t,e){return{type:"SET-TASKS",tasks:e,todolistId:t}}(a,e.data.items))})).catch((function(e){t(W(e.massage))})).finally((function(){t(V("idle"))}))}))}),[e,t.todoListId]);var a=t.tasks;"active"===t.filter&&(a=t.tasks.filter((function(t){return t.status===G.New}))),"completed"===t.filter&&(a=t.tasks.filter((function(t){return t.status===G.Completed})));var c=a.map((function(e){var a={title:e.title,status:e.status,priority:e.priority,description:e.description,deadline:e.deadline,completed:e.completed,startDate:e.startDate};return o.a.createElement($,{key:e.id,taskId:e.id,status:e.status,title:e.title,todoListId:t.todoListId,taskForUpdateParam:a})})),i=Object(n.useCallback)((function(a){var n,o;e((n=a,o=t.todoListId,{type:"CHANGE-TODOLIST-FILTER",filter:n,id:o}))}),[e,t.todoListId]),l=Object(n.useCallback)((function(a){e(function(t,e){return function(a){a(V("loading")),a(J(t,"loading")),K(t,e).then((function(e){e.data.resultCode===r.complete?a(function(t,e){return{type:"ADD-TASK",todolistId:t,task:e}}(t,e.data.data.item)):Y(a,e.data)})).catch((function(t){a(W(t.massage))})).finally((function(){a(V("idle")),a(J(t,"idle"))}))}}(t.todoListId,a))}),[e,t.todoListId]),s=Object(n.useCallback)((function(a){e(function(t,e){return function(a){a(V("loading")),_(t,e).then((function(n){n.data.resultCode===r.complete?a(function(t,e){return{type:"CHANGE-TODOLIST-TITLE",title:e,todolistId:t}}(t,e)):Y(a,n.data)})).catch((function(t){a(W(t.massage))})).finally((function(){a(V("idle"))}))}}(t.todoListId,a))}),[e,t.todoListId]);return o.a.createElement(I.a,{sx:{padding:"10px 20px 20px 20px"}},o.a.createElement(f.a,{onClick:function(){var a;e((a=t.todoListId,function(t){t(V("loading")),t(J(a,"loading")),R(a).then((function(e){e.data.resultCode===r.complete?(t({type:"REMOVE-TODOLIST",todoListId:a}),t(J(a,"idle"))):Y(t,e.data)})).catch((function(e){t(W(e.massage))})).finally((function(){t(V("idle"))}))}))},sx:{margin:"0",padding:"0",position:"relative",left:"230px"},disabled:"loading"===t.entityStatus},o.a.createElement(j.a,null)),o.a.createElement(T,{textStyle:"h6",title:t.title,callBack:s}),o.a.createElement(p,{addItem:l,disabled:"loading"===t.entityStatus}),o.a.createElement(S.a,null,c),o.a.createElement(tt,{filter:t.filter,filteredTasks:i}))})),at=a(182),nt=a(191),ot=a(192),ct=a(189),it=a(190),rt=a(174),lt=function(){return o.a.createElement(ct.a,{position:"static"},o.a.createElement(it.a,{style:{justifyContent:"space-between"}},o.a.createElement(f.a,{edge:"start",color:"inherit","aria-label":"menu"},o.a.createElement(rt.a,null)),o.a.createElement(b.a,{variant:"h6",component:"span"},"TodoLists"),o.a.createElement(Z.a,{color:"inherit",variant:"outlined"},"Login")))},st=a(180),ut=a(178),dt=o.a.forwardRef((function(t,e){return o.a.createElement(ut.a,Object.assign({elevation:6,ref:e,variant:"filled"},t))})),ft=function(){var t=Object(C.c)((function(t){return t.app.error})),e=Object(C.b)(),a=function(t,a){"clickaway"!==a&&e(W(null))};return o.a.createElement(st.a,{open:!!t,autoHideDuration:6e3,onClose:a},o.a.createElement(dt,{onClose:a,severity:"error",sx:{width:"100%"}},t))},mt=function(){var t=Object(C.b)(),e=Object(C.c)((function(t){return t.todoLists})),a=Object(C.c)((function(t){return t.tasks})),c=Object(n.useCallback)((function(e){t(function(t){return function(e){e(V("loading")),P(t).then((function(t){t.data.resultCode===r.complete?e({type:"ADD-TODOLIST",todos:t.data.data.item}):Y(e,t.data)})).catch((function(t){e(W(t.massage))})).finally((function(){e(V("idle"))}))}}(e))}),[t]),i=e.map((function(t){return o.a.createElement(at.a,{item:!0,key:t.id},o.a.createElement(et,{todoListId:t.id,entityStatus:t.entityStatus,title:t.title,tasks:a[t.id],filter:t.filter}))}));Object(n.useEffect)((function(){t((function(t){t(V("loading")),N().then((function(e){t({type:"SET-TODOLISTS",todos:e.data})})).catch((function(e){t(W(e.massage))})).finally((function(){t(V("idle"))}))}))}),[t]);var l=Object(C.c)((function(t){return t.app.status}));return console.log(l),o.a.createElement(o.a.Fragment,null,o.a.createElement(lt,null),"loading"===l&&o.a.createElement(nt.a,null),o.a.createElement(ot.a,{fixed:!0},o.a.createElement(at.a,{container:!0,sx:{padding:"10px 0 10px "}},o.a.createElement(p,{addItem:c})),o.a.createElement(at.a,{container:!0,spacing:5},i)),o.a.createElement(ft,null))},pt=a(59),Ot=a(91),Et=Object(pt.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TASK":return Object(g.a)(Object(g.a)({},t),{},Object(D.a)({},e.todoListId,t[e.todoListId].filter((function(t){return t.id!==e.taskId}))));case"ADD-TASK":return Object(g.a)(Object(g.a)({},t),{},Object(D.a)({},e.todolistId,[e.task].concat(Object(A.a)(t[e.todolistId]))));case"CHANGE-TASK-STATUS":case"CHANGE-TASK-TITLE":return Object(g.a)(Object(g.a)({},t),{},Object(D.a)({},e.task.todoListId,t[e.task.todoListId].map((function(t){return t.id===e.task.id?e.task:t}))));case"ADD-TODOLIST":return Object(g.a)(Object(g.a)({},t),{},Object(D.a)({},e.todos.id,[]));case"REMOVE-TODOLIST":var a=Object(g.a)({},t);return delete a[e.todoListId],a;case"SET-TODOLISTS":var n=Object(g.a)({},t);return e.todos.forEach((function(t){n[t.id]=[]})),n;case"SET-TASKS":var o=Object(g.a)({},t);return o[e.todolistId]=e.tasks,o;default:return t}},todoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.todoListId}));case"ADD-TODOLIST":var a=Object(g.a)(Object(g.a)({},e.todos),{},{filter:"all",entityStatus:"idle"});return[a].concat(Object(A.a)(t));case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.todolistId?Object(g.a)(Object(g.a)({},t),{},{title:e.title}):t}));case"CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.id?Object(g.a)(Object(g.a)({},t),{},{filter:e.filter}):t}));case"SET-TODOLISTS":var n=e.todos.map((function(t){return Object(g.a)(Object(g.a)({},t),{},{filter:"all",entityStatus:"idle"})}));return[].concat(Object(A.a)(t),Object(A.a)(n));case"CHANGE-TODOLIST-ENTITY-STATUS":return t.map((function(t){return t.id===e.todolistId?Object(g.a)(Object(g.a)({},t),{},{entityStatus:e.entityStatus}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(g.a)(Object(g.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(g.a)(Object(g.a)({},t),{},{error:e.error});default:return t}}}),bt=Object(pt.c)(Et,Object(pt.a)(Ot.a));window.store=bt,i.a.render(o.a.createElement(C.a,{store:bt},o.a.createElement(mt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},85:function(t,e,a){t.exports={cont:"AddItemForm_cont__2d2zE"}},88:function(t,e,a){t.exports={spanStyle:"EditableSpan_spanStyle__3vl5L"}},89:function(t,e,a){t.exports={container:"TodoList_container__2qDxQ",isDone:"TodoList_isDone__2QLv_"}}},[[100,1,2]]]);
//# sourceMappingURL=main.278337dd.chunk.js.map