(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{159:function(t,e,a){t.exports={cont:"AddItemForm_cont__2d2zE"}},160:function(t,e,a){t.exports={spanStyle:"EditableSpan_spanStyle__3vl5L"}},161:function(t,e,a){t.exports={container:"TodoList_container__2qDxQ",isDone:"TodoList_isDone__2QLv_"}},173:function(t,e,a){t.exports=a(299)},178:function(t,e,a){},299:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),i=a(33),r=a.n(i);a(178),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s,c=a(368),l=a(19),d=a(357),u=a(359),m=a(360),f=a(361),p=a(362),g=a(341),b=a(34),E=Object(b.b)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setLoadingBarStatusAC:function(t,e){t.status=e.payload.status},setErrorAC:function(t,e){t.error=e.payload.error},isInitializedAC:function(t,e){t.isInitialized=e.payload.isInitialized}}}),y=E.reducer,h=E.actions,v=h.setLoadingBarStatusAC,I=h.setErrorAC,L=h.isInitializedAC,k=a(149),C=a.n(k).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"099be23b-024b-4d04-8aea-ded1a22de046"}}),j=function(){return C.get("todo-lists")},O=function(t){return C.post("todo-lists",{title:t})},x=function(t){return C.delete("todo-lists/".concat(t))},S=function(t,e){return C.put("todo-lists/".concat(t),{title:e})},w=function(t){return C.get("todo-lists/".concat(t,"/tasks"))},T=function(t,e){return C.post("todo-lists/".concat(t,"/tasks"),{title:e})},A=function(t,e){return C.delete("todo-lists/".concat(t,"/tasks/").concat(e))},_=function(t,e,a){return C.put("todo-lists/".concat(t,"/tasks/").concat(e),a)},P=function(t){return C.post("auth/login",t)},F=function(){return C.get("auth/me")},N=function(){return C.delete("auth/login")};!function(t){t[t.complete=0]="complete",t[t.error=1]="error",t[t.captcha=10]="captcha"}(s||(s={}));var z,D,B,U=a(36),R=function(t,e){e.messages.length?t(I({error:e.messages[0]})):t(I({error:"Some error occured"}))},q=Object(b.b)({name:"todoLists",initialState:[],reducers:{addTodolistAC:function(t,e){var a=Object(U.a)(Object(U.a)({},e.payload.todos),{},{filter:"all",entityStatus:"idle"});t.unshift(a)},removeTodoListAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todoListId}));a>-1&&t.splice(a,1)},changeTodoListTitleAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todoListId}));a>-1&&(t[a].title=e.payload.title)},filterTodoListAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));a>-1&&(t[a].filter=e.payload.filter)},setTodoListsAC:function(t,e){return e.payload.todos.map((function(t){return Object(U.a)(Object(U.a)({},t),{},{filter:"all",entityStatus:"idle"})}))},changeTodoListEntityStatusAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todoListId}));a>-1&&(t[a].entityStatus=e.payload.entityStatus)}}}),M=q.reducer,H=q.actions,K=H.addTodolistAC,W=H.removeTodoListAC,G=H.changeTodoListTitleAC,J=H.filterTodoListAC,Q=H.setTodoListsAC,V=H.changeTodoListEntityStatusAC,Y=Object(b.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(t,e){t.isLoggedIn=e.payload.value}}}),Z=Y.reducer,$=Y.actions.setIsLoggedInAC,X=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.auth.isLoggedIn}));return o.a.createElement(d.a,{position:"static"},o.a.createElement(u.a,{style:{justifyContent:"space-between"}},o.a.createElement(m.a,{edge:"start",color:"inherit","aria-label":"menu"},o.a.createElement(g.a,null)),o.a.createElement(f.a,{variant:"h6",component:"span"},"TodoLists"),e?o.a.createElement(p.a,{color:"inherit",variant:"outlined",onClick:function(){t((function(t){t(v({status:"loading"})),N().then((function(e){e.data.resultCode===s.complete?(t($({value:!1})),t(Q({todos:[]}))):e.data.messages.length?t(I({error:e.data.messages[0]})):t(I({error:"Some error occured"}))})).catch((function(e){t(I(e.massage))})).finally((function(){t(v({status:"idle"}))}))}))}},"LogOut"):o.a.createElement(p.a,{color:"inherit",variant:"outlined"},"Login")))},tt=a(353),et=a(351),at=o.a.forwardRef((function(t,e){return o.a.createElement(et.a,Object.assign({elevation:6,ref:e,variant:"filled"},t))})),nt=function(){var t=Object(l.c)((function(t){return t.app.error})),e=Object(l.b)(),a=function(t,a){"clickaway"!==a&&e(I({error:null}))};return o.a.createElement(tt.a,{open:!!t,autoHideDuration:6e3,onClose:a},o.a.createElement(at,{onClose:a,severity:"error",sx:{width:"100%"}},t))},ot=a(356),it=a(352),rt=a(363),st=a(366),ct=a(364),lt=a(344),dt=a(349),ut=a(162),mt=a(92),ft=a(15),pt=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.auth.isLoggedIn})),a=Object(ut.a)({initialValues:{email:"free@samuraijs.com",password:"free",rememberMe:!1},validationSchema:mt.a({email:mt.b().email("Invalid email address").required("Required"),password:mt.b().min(3,"Min size 6 char").required("Required")}),onSubmit:function(e){var n;t((n=e,function(t){t(v({status:"loading"})),P(n).then((function(e){e.data.resultCode===s.complete?t($({value:!0})):e.data.messages.length?t(I({error:e.data.messages[0]})):t(I({error:"Some error occured"}))})).catch((function(e){t(I(e.massage))})).finally((function(){t(v({status:"idle"}))}))})),a.resetForm()}});return e?o.a.createElement(ft.a,{to:"/to-do-lists"}):o.a.createElement(ot.a,{container:!0,justifyContent:"center"},o.a.createElement(ot.a,{item:!0,justifyContent:"center"},o.a.createElement(rt.a,null,o.a.createElement(lt.a,null,o.a.createElement("p",null,"To log in get registered",o.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"}," here")),o.a.createElement("p",null,"or use common test account credentials:"),o.a.createElement("p",null,"Email: free@samuraijs.com"),o.a.createElement("p",null,"Password: free")),o.a.createElement("form",{onSubmit:a.handleSubmit},o.a.createElement(ct.a,null,o.a.createElement(dt.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email&&o.a.createElement("div",null,a.errors.email),o.a.createElement(dt.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.touched.password&&a.errors.password&&o.a.createElement("div",null,a.errors.password),o.a.createElement(st.a,Object.assign({label:"Remember me",control:o.a.createElement(it.a,null)},a.getFieldProps("rememberMe"))),o.a.createElement(p.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))},gt=a(11),bt=a(159),Et=a.n(bt),yt=a(346),ht=o.a.memo((function(t){var e=Object(n.useState)(""),a=Object(gt.a)(e,2),i=a[0],r=a[1],s=Object(n.useState)(""),c=Object(gt.a)(s,2),l=c[0],d=c[1],u=function(){i.trim()?(t.addItem(i.trim()),r(""),d("")):d("Incorrect value")};return o.a.createElement("div",{className:Et.a.cont},o.a.createElement(dt.a,{variant:"standard",onKeyPress:function(t){"Enter"===t.key&&u()},onChange:function(t){r(t.currentTarget.value),d("")},value:i,error:!!l,helperText:l,sx:{minWidth:"198px"}}),o.a.createElement(m.a,{onClick:u,color:"primary",disabled:t.disabled},o.a.createElement(yt.a,null)))})),vt=a(91),It=a.n(vt),Lt=a(160),kt=a.n(Lt),Ct=o.a.memo((function(t){var e=t.title,a=t.callBack,i=t.textStyle,r=Object(n.useState)(e),s=Object(gt.a)(r,2),c=s[0],l=s[1],d=Object(n.useState)(!1),u=Object(gt.a)(d,2),m=u[0],p=u[1],g=function(){a(c),p(!1)};return o.a.createElement(o.a.Fragment,null,m?o.a.createElement(dt.a,{autoFocus:!0,variant:"standard",onKeyPress:function(t){"Enter"===t.key&&g()},onChange:function(t){l(t.currentTarget.value)},onBlur:g,type:"text",value:c}):o.a.createElement(f.a,{variant:i,component:"span",className:kt.a.spanStyle,onDoubleClick:function(){return p(!0)},sx:{flexGrow:1}},e))})),jt=a(358),Ot=a(365),xt=a(348),St=a(354),wt=a(161),Tt=a.n(wt),At=a(347),_t=a(4);!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(D||(D={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgent=3]="Urgent",t[t.Later=4]="Later"}(B||(B={}));var Pt=Object(b.b)({name:"tasks",initialState:{},reducers:{addTaskAC:function(t,e){t[e.payload.todoListId].unshift(e.payload.task)},removeTaskAC:function(t,e){var a=t[e.payload.todoListId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&a.splice(n,1)},upgradeTaskAC:function(t,e){var a=t[e.payload.task.todoListId],n=a.findIndex((function(t){return t.id===e.payload.task.id}));n>-1&&(a[n]=e.payload.task)},setTasksAC:function(t,e){t[e.payload.todoListId]=e.payload.tasks}},extraReducers:(z={},Object(_t.a)(z,K.type,(function(t,e){t[e.payload.todos.id]=[]})),Object(_t.a)(z,W.type,(function(t,e){delete t[e.payload.todoListId]})),Object(_t.a)(z,Q.type,(function(t,e){e.payload.todos.forEach((function(e){t[e.id]=[]}))})),z)}),Ft=Pt.reducer,Nt=Pt.actions,zt=Nt.addTaskAC,Dt=Nt.removeTaskAC,Bt=Nt.upgradeTaskAC,Ut=Nt.setTasksAC,Rt=function(t,e,a){return function(n){n(v({status:"loading"})),_(t,e,a).then((function(t){t.data.resultCode===s.complete?n(Bt({task:t.data.data.item})):R(n,t.data)})).catch((function(t){n(I({error:t.massage}))})).finally((function(){n(v({status:"idle"}))}))}},qt=o.a.memo((function(t){var e=Object(l.b)();return o.a.createElement(St.a,{key:t.taskId,className:"".concat(t.status?Tt.a.status:""),disablePadding:!0,divider:!0,sx:{pl:"16px"}},o.a.createElement(it.a,{onChange:function(a){var n=a.currentTarget.checked?D.Completed:D.New;e(Rt(t.todoListId,t.taskId,Object(U.a)(Object(U.a)({},t.taskForUpdateParam),{},{status:n})))},checked:t.status===D.Completed}),o.a.createElement(Ct,{title:t.title,callBack:function(a){e(Rt(t.todoListId,t.taskId,Object(U.a)(Object(U.a)({},t.taskForUpdateParam),{},{title:a})))}}),o.a.createElement(m.a,{onClick:function(){return e((a=t.todoListId,n=t.taskId,function(t){t(v({status:"loading"})),t(V({todoListId:a,entityStatus:"loading"})),A(a,n).then((function(e){e.data.resultCode===s.complete?t(Dt({todoListId:a,taskId:n})):R(t,e.data)})).catch((function(e){t(I({error:e.massage}))})).finally((function(){t(v({status:"idle"})),t(V({todoListId:a,entityStatus:"idle"}))}))}));var a,n}},o.a.createElement(At.a,null)))})),Mt=a(367),Ht=o.a.memo((function(t){var e=t.filter,a=t.filteredTasks;return o.a.createElement(Mt.a,{size:"small",variant:"outlined"},o.a.createElement(p.a,{color:"all"===e?"secondary":"primary",onClick:function(){return a("all")}},"All"),o.a.createElement(p.a,{color:"active"===e?"secondary":"primary",onClick:function(){return a("active")}},"Active"),o.a.createElement(p.a,{color:"completed"===e?"secondary":"primary",onClick:function(){return a("completed")}},"Completed"))})),Kt=o.a.memo((function(t){var e=Object(l.b)();Object(n.useEffect)((function(){var a;e((a=t.todoListId,function(t){t(v({status:"loading"})),w(a).then((function(e){t(Ut({todoListId:a,tasks:e.data.items}))})).catch((function(e){t(I({error:e.massage}))})).finally((function(){t(v({status:"idle"}))}))}))}),[e,t.todoListId]);var a=t.tasks;"active"===t.filter&&(a=t.tasks.filter((function(t){return t.status===D.New}))),"completed"===t.filter&&(a=t.tasks.filter((function(t){return t.status===D.Completed})));var i=a.map((function(e){var a={title:e.title,status:e.status,priority:e.priority,description:e.description,deadline:e.deadline,completed:e.completed,startDate:e.startDate};return o.a.createElement(qt,{key:e.id,taskId:e.id,status:e.status,title:e.title,todoListId:t.todoListId,taskForUpdateParam:a})})),r=Object(n.useCallback)((function(a){e(J({filter:a,id:t.todoListId}))}),[e,t.todoListId]),c=Object(n.useCallback)((function(a){e(function(t,e){return function(a){a(v({status:"loading"})),a(V({todoListId:t,entityStatus:"loading"})),T(t,e).then((function(e){e.data.resultCode===s.complete?a(zt({todoListId:t,task:e.data.data.item})):R(a,e.data)})).catch((function(t){a(I({error:t.massage}))})).finally((function(){a(v({status:"idle"})),a(V({todoListId:t,entityStatus:"idle"}))}))}}(t.todoListId,a))}),[e,t.todoListId]),d=Object(n.useCallback)((function(a){e(function(t,e){return function(a){a(v({status:"loading"})),S(t,e).then((function(n){n.data.resultCode===s.complete?a(G({todoListId:t,title:e})):R(a,n.data)})).catch((function(t){a(I(t.massage))})).finally((function(){a(v({status:"idle"}))}))}}(t.todoListId,a))}),[e,t.todoListId]);return o.a.createElement(jt.a,{sx:{position:"relative",padding:"20px 20px 20px 20px",margin:"10px 10px 10px 10px",width:"260px"}},o.a.createElement(m.a,{onClick:function(){var a;e((a=t.todoListId,function(t){t(v({status:"loading"})),t(V({todoListId:a,entityStatus:"loading"})),x(a).then((function(e){e.data.resultCode===s.complete?(t(W({todoListId:a})),t(V({todoListId:a,entityStatus:"idle"}))):R(t,e.data)})).catch((function(e){t(I(e.massage))})).finally((function(){t(v({status:"idle"}))}))}))},sx:{margin:"0",padding:"0",position:"absolute",left:"272px",top:"4px"},disabled:"loading"===t.entityStatus},o.a.createElement(xt.a,null)),o.a.createElement(Ct,{textStyle:"h6",title:t.title,callBack:d}),o.a.createElement(ht,{addItem:c,disabled:"loading"===t.entityStatus}),o.a.createElement(Ot.a,null,i),o.a.createElement(Ht,{filter:t.filter,filteredTasks:r}))})),Wt=o.a.memo((function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.todoLists})),a=Object(l.c)((function(t){return t.tasks})),i=Object(l.c)((function(t){return t.auth.isLoggedIn})),r=Object(n.useCallback)((function(e){t(function(t){return function(e){e(v({status:"loading"})),O(t).then((function(t){t.data.resultCode===s.complete?e(K({todos:t.data.data.item})):R(e,t.data)})).catch((function(t){e(I(t.massage))})).finally((function(){e(v({status:"idle"}))}))}}(e))}),[t]),c=e.map((function(t){return o.a.createElement(ot.a,{item:!0,key:t.id},o.a.createElement(Kt,{todoListId:t.id,entityStatus:t.entityStatus,title:t.title,tasks:a[t.id],filter:t.filter}))}));return Object(n.useEffect)((function(){t((function(t){t(v({status:"loading"})),j().then((function(e){t(Q({todos:e.data}))})).catch((function(e){t(I(e.massage))})).finally((function(){t(v({status:"idle"}))}))}))}),[t]),i?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:It.a.container},o.a.createElement("div",{className:It.a.addContainer},o.a.createElement(ht,{addItem:r})),o.a.createElement("div",{className:It.a.todosContainer},c))):o.a.createElement(ft.a,{to:"/login"})})),Gt=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.app.isInitialized})),a=Object(l.c)((function(t){return t.app.status}));return Object(n.useEffect)((function(){t((function(t){t(v({status:"loading"})),F().then((function(e){e.data.resultCode===s.complete?(t($({value:!0})),t(L({isInitialized:!0}))):t(L({isInitialized:!0}))})).catch((function(e){t(I(e.massage))})).finally((function(){t(v({status:"idle"}))}))}))}),[t]),e?o.a.createElement(o.a.Fragment,null,o.a.createElement(X,null),"loading"===a&&o.a.createElement(c.a,null),o.a.createElement(ft.d,null,o.a.createElement(ft.b,{path:"/",element:o.a.createElement(ft.a,{to:"/login"})}),o.a.createElement(ft.b,{path:"to-do-lists",element:o.a.createElement(Wt,null)}),o.a.createElement(ft.b,{path:"login",element:o.a.createElement(pt,null)}),o.a.createElement(ft.b,{path:"404",element:o.a.createElement("h1",null,"404: PAGE NOT FOUND")}),o.a.createElement(ft.b,{path:"*",element:o.a.createElement(ft.a,{to:"/404"})})),o.a.createElement(nt,null)):o.a.createElement("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"}},o.a.createElement(c.a,null))},Jt=a(30),Qt=a(68),Vt=Object(Jt.b)({tasks:Ft,todoLists:M,app:y,auth:Z}),Yt=Object(b.a)({reducer:Vt,middleware:function(t){return t().prepend(Qt.a)}});window.store=Yt;var Zt=a(66);r.a.render(o.a.createElement(l.a,{store:Yt},o.a.createElement(Zt.a,null,o.a.createElement(Gt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},91:function(t,e,a){t.exports={container:"TodoLists_container__2YZy9",addContainer:"TodoLists_addContainer__3itO8",todosContainer:"TodoLists_todosContainer__3OVkh"}}},[[173,1,2]]]);
//# sourceMappingURL=main.67d02805.chunk.js.map