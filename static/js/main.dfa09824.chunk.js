(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{158:function(t,e,a){t.exports={cont:"AddItemForm_cont__2d2zE"}},159:function(t,e,a){t.exports={spanStyle:"EditableSpan_spanStyle__3vl5L"}},160:function(t,e,a){t.exports={container:"TodoList_container__2qDxQ",isDone:"TodoList_isDone__2QLv_"}},173:function(t,e,a){t.exports=a(300)},178:function(t,e,a){},179:function(t,e,a){},300:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),i=a(33),r=a.n(i);a(178),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(179);var c,s=a(370),l=a(18),d=a(358),u=a(360),m=a(361),f=a(362),p=a(363),g=a(342),b=a(34),E=Object(b.b)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setLoadingBarStatusAC:function(t,e){t.status=e.payload.status},setErrorAC:function(t,e){t.error=e.payload.error},isInitializedAC:function(t,e){t.isInitialized=e.payload.isInitialized}}}),y=E.reducer,h=E.actions,I=h.setLoadingBarStatusAC,v=h.setErrorAC,L=h.isInitializedAC,k=a(148),C=a.n(k).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"099be23b-024b-4d04-8aea-ded1a22de046"}}),j=function(){return C.get("todo-lists")},O=function(t){return C.post("todo-lists",{title:t})},S=function(t){return C.delete("todo-lists/".concat(t))},x=function(t,e){return C.put("todo-lists/".concat(t),{title:e})},w=function(t){return C.get("todo-lists/".concat(t,"/tasks"))},T=function(t,e){return C.post("todo-lists/".concat(t,"/tasks"),{title:e})},A=function(t,e){return C.delete("todo-lists/".concat(t,"/tasks/").concat(e))},P=function(t,e,a){return C.put("todo-lists/".concat(t,"/tasks/").concat(e),a)},F=function(t){return C.post("auth/login",t)},_=function(){return C.get("auth/me")},z=function(){return C.delete("auth/login")};!function(t){t[t.complete=0]="complete",t[t.error=1]="error",t[t.captcha=10]="captcha"}(c||(c={}));var D,B,N,U=Object(b.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(t,e){t.isLoggedIn=e.payload.value}}}),R=U.reducer,q=U.actions.setIsLoggedInAC,M=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.auth.isLoggedIn}));return o.a.createElement(d.a,{position:"static"},o.a.createElement(u.a,{style:{justifyContent:"space-between"}},o.a.createElement(m.a,{edge:"start",color:"inherit","aria-label":"menu"},o.a.createElement(g.a,null)),o.a.createElement(f.a,{variant:"h6",component:"span"},"TodoLists"),e?o.a.createElement(p.a,{color:"inherit",variant:"outlined",onClick:function(){t((function(t){t(I({status:"loading"})),z().then((function(e){e.data.resultCode===c.complete?t(q({value:!0})):e.data.messages.length?t(v({error:e.data.messages[0]})):t(v({error:"Some error occured"}))})).catch((function(e){t(v(e.massage))})).finally((function(){t(I({status:"idle"}))}))}))}},"LogOut"):o.a.createElement(p.a,{color:"inherit",variant:"outlined"},"Login")))},H=a(354),K=a(352),W=o.a.forwardRef((function(t,e){return o.a.createElement(K.a,Object.assign({elevation:6,ref:e,variant:"filled"},t))})),G=function(){var t=Object(l.c)((function(t){return t.app.error})),e=Object(l.b)(),a=function(t,a){"clickaway"!==a&&e(v({error:null}))};return o.a.createElement(H.a,{open:!!t,autoHideDuration:6e3,onClose:a},o.a.createElement(W,{onClose:a,severity:"error",sx:{width:"100%"}},t))},J=a(357),Q=a(353),V=a(364),Y=a(367),$=a(365),X=a(345),Z=a(350),tt=a(161),et=a(91),at=a(15),nt=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.auth.isLoggedIn})),a=Object(tt.a)({initialValues:{email:"",password:"",rememberMe:!1},validationSchema:et.a({email:et.b().email("Invalid email address").required("Required"),password:et.b().min(6,"Min size 6 char").required("Required")}),onSubmit:function(e){var n;t((n=e,function(t){t(I({status:"loading"})),F(n).then((function(e){e.data.resultCode===c.complete?t(q({value:!0})):e.data.messages.length?t(v({error:e.data.messages[0]})):t(v({error:"Some error occured"}))})).catch((function(e){t(v(e.massage))})).finally((function(){t(I({status:"idle"}))}))})),a.resetForm()}});return e?o.a.createElement(at.a,{to:"/to-do-lists"}):o.a.createElement(J.a,{container:!0,justifyContent:"center"},o.a.createElement(J.a,{item:!0,justifyContent:"center"},o.a.createElement(V.a,null,o.a.createElement(X.a,null,o.a.createElement("p",null,"To log in get registered",o.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"}," here")),o.a.createElement("p",null,"or use common test account credentials:"),o.a.createElement("p",null,"Email: free@samuraijs.com"),o.a.createElement("p",null,"Password: free")),o.a.createElement("form",{onSubmit:a.handleSubmit},o.a.createElement($.a,null,o.a.createElement(Z.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email&&o.a.createElement("div",null,a.errors.email),o.a.createElement(Z.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.touched.password&&a.errors.password&&o.a.createElement("div",null,a.errors.password),o.a.createElement(Y.a,Object.assign({label:"Remember me",control:o.a.createElement(Q.a,null)},a.getFieldProps("rememberMe"))),o.a.createElement(p.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))},ot=a(36),it=function(t,e){e.messages.length?t(v({error:e.messages[0]})):t(v({error:"Some error occured"}))},rt=Object(b.b)({name:"todoLists",initialState:[],reducers:{addTodolistAC:function(t,e){var a=Object(ot.a)(Object(ot.a)({},e.payload.todos),{},{filter:"all",entityStatus:"idle"});t.unshift(a)},removeTodoListAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todoListId}));a>-1&&t.splice(a,1)},changeTodoListTitleAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todoListId}));a>-1&&(t[a].title=e.payload.title)},filterTodoListAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));a>-1&&(t[a].filter=e.payload.filter)},setTodoListsAC:function(t,e){return e.payload.todos.map((function(t){return Object(ot.a)(Object(ot.a)({},t),{},{filter:"all",entityStatus:"idle"})}))},changeTodoListEntityStatusAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todoListId}));a>-1&&(t[a].entityStatus=e.payload.entityStatus)}}}),ct=rt.reducer,st=rt.actions,lt=st.addTodolistAC,dt=st.removeTodoListAC,ut=st.changeTodoListTitleAC,mt=st.filterTodoListAC,ft=st.setTodoListsAC,pt=st.changeTodoListEntityStatusAC,gt=a(12),bt=a(158),Et=a.n(bt),yt=a(347),ht=o.a.memo((function(t){var e=Object(n.useState)(""),a=Object(gt.a)(e,2),i=a[0],r=a[1],c=Object(n.useState)(""),s=Object(gt.a)(c,2),l=s[0],d=s[1],u=function(){i.trim()?(t.addItem(i.trim()),r(""),d("")):d("Incorrect value")};return o.a.createElement("div",{className:Et.a.cont},o.a.createElement(Z.a,{variant:"standard",onKeyPress:function(t){"Enter"===t.key&&u()},onChange:function(t){r(t.currentTarget.value),d("")},value:i,error:!!l,helperText:l,sx:{minWidth:"198px"}}),o.a.createElement(m.a,{onClick:u,color:"primary",disabled:t.disabled},o.a.createElement(yt.a,null)))})),It=a(369),vt=a(159),Lt=a.n(vt),kt=o.a.memo((function(t){var e=t.title,a=t.callBack,i=t.textStyle,r=Object(n.useState)(e),c=Object(gt.a)(r,2),s=c[0],l=c[1],d=Object(n.useState)(!1),u=Object(gt.a)(d,2),m=u[0],p=u[1],g=function(){a(s),p(!1)};return o.a.createElement(o.a.Fragment,null,m?o.a.createElement(Z.a,{autoFocus:!0,variant:"standard",onKeyPress:function(t){"Enter"===t.key&&g()},onChange:function(t){l(t.currentTarget.value)},onBlur:g,type:"text",value:s}):o.a.createElement(f.a,{variant:i,component:"span",className:Lt.a.spanStyle,onDoubleClick:function(){return p(!0)},sx:{flexGrow:1}},e))})),Ct=a(359),jt=a(366),Ot=a(349),St=a(355),xt=a(160),wt=a.n(xt),Tt=a(348),At=a(4);!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(B||(B={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgent=3]="Urgent",t[t.Later=4]="Later"}(N||(N={}));var Pt=Object(b.b)({name:"tasks",initialState:{},reducers:{addTaskAC:function(t,e){t[e.payload.todoListId].unshift(e.payload.task)},removeTaskAC:function(t,e){var a=t[e.payload.todoListId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&a.splice(n,1)},upgradeTaskAC:function(t,e){var a=t[e.payload.task.todoListId],n=a.findIndex((function(t){return t.id===e.payload.task.id}));n>-1&&(a[n]=e.payload.task)},setTasksAC:function(t,e){t[e.payload.todoListId]=e.payload.tasks}},extraReducers:(D={},Object(At.a)(D,lt.type,(function(t,e){t[e.payload.todos.id]=[]})),Object(At.a)(D,dt.type,(function(t,e){delete t[e.payload.todoListId]})),Object(At.a)(D,ft.type,(function(t,e){e.payload.todos.forEach((function(e){t[e.id]=[]}))})),D)}),Ft=Pt.reducer,_t=Pt.actions,zt=_t.addTaskAC,Dt=_t.removeTaskAC,Bt=_t.upgradeTaskAC,Nt=_t.setTasksAC,Ut=function(t,e,a){return function(n){n(I({status:"loading"})),P(t,e,a).then((function(t){t.data.resultCode===c.complete?n(Bt({task:t.data.data.item})):it(n,t.data)})).catch((function(t){n(v({error:t.massage}))})).finally((function(){n(I({status:"idle"}))}))}},Rt=o.a.memo((function(t){var e=Object(l.b)();return o.a.createElement(St.a,{key:t.taskId,className:"".concat(t.status?wt.a.status:""),disablePadding:!0,divider:!0,sx:{pl:"16px"}},o.a.createElement(Q.a,{onChange:function(a){var n=a.currentTarget.checked?B.Completed:B.New;e(Ut(t.todoListId,t.taskId,Object(ot.a)(Object(ot.a)({},t.taskForUpdateParam),{},{status:n})))},checked:t.status===B.Completed}),o.a.createElement(kt,{title:t.title,callBack:function(a){e(Ut(t.todoListId,t.taskId,Object(ot.a)(Object(ot.a)({},t.taskForUpdateParam),{},{title:a})))}}),o.a.createElement(m.a,{onClick:function(){return e((a=t.todoListId,n=t.taskId,function(t){t(I({status:"loading"})),t(pt({todoListId:a,entityStatus:"loading"})),A(a,n).then((function(e){e.data.resultCode===c.complete?t(Dt({todoListId:a,taskId:n})):it(t,e.data)})).catch((function(e){t(v({error:e.massage}))})).finally((function(){t(I({status:"idle"})),t(pt({todoListId:a,entityStatus:"idle"}))}))}));var a,n}},o.a.createElement(Tt.a,null)))})),qt=a(368),Mt=o.a.memo((function(t){var e=t.filter,a=t.filteredTasks;return console.log("ButtonFilterLine"),o.a.createElement(qt.a,{size:"small",variant:"outlined"},o.a.createElement(p.a,{color:"all"===e?"secondary":"primary",onClick:function(){return a("all")}},"All"),o.a.createElement(p.a,{color:"active"===e?"secondary":"primary",onClick:function(){return a("active")}},"Active"),o.a.createElement(p.a,{color:"completed"===e?"secondary":"primary",onClick:function(){return a("completed")}},"Completed"))})),Ht=o.a.memo((function(t){console.log("TODOLIST");var e=Object(l.b)();Object(n.useEffect)((function(){var a;e((a=t.todoListId,function(t){t(I({status:"loading"})),w(a).then((function(e){t(Nt({todoListId:a,tasks:e.data.items}))})).catch((function(e){t(v({error:e.massage}))})).finally((function(){t(I({status:"idle"}))}))}))}),[e,t.todoListId]);var a=t.tasks;"active"===t.filter&&(a=t.tasks.filter((function(t){return t.status===B.New}))),"completed"===t.filter&&(a=t.tasks.filter((function(t){return t.status===B.Completed})));var i=a.map((function(e){var a={title:e.title,status:e.status,priority:e.priority,description:e.description,deadline:e.deadline,completed:e.completed,startDate:e.startDate};return o.a.createElement(Rt,{key:e.id,taskId:e.id,status:e.status,title:e.title,todoListId:t.todoListId,taskForUpdateParam:a})})),r=Object(n.useCallback)((function(a){e(mt({filter:a,id:t.todoListId}))}),[e,t.todoListId]),s=Object(n.useCallback)((function(a){e(function(t,e){return function(a){a(I({status:"loading"})),a(pt({todoListId:t,entityStatus:"loading"})),T(t,e).then((function(e){e.data.resultCode===c.complete?a(zt({todoListId:t,task:e.data.data.item})):it(a,e.data)})).catch((function(t){a(v({error:t.massage}))})).finally((function(){a(I({status:"idle"})),a(pt({todoListId:t,entityStatus:"idle"}))}))}}(t.todoListId,a))}),[e,t.todoListId]),d=Object(n.useCallback)((function(a){e(function(t,e){return function(a){a(I({status:"loading"})),x(t,e).then((function(n){n.data.resultCode===c.complete?a(ut({todoListId:t,title:e})):it(a,n.data)})).catch((function(t){a(v(t.massage))})).finally((function(){a(I({status:"idle"}))}))}}(t.todoListId,a))}),[e,t.todoListId]);return o.a.createElement(Ct.a,{sx:{padding:"10px 20px 20px 20px"}},o.a.createElement(m.a,{onClick:function(){var a;e((a=t.todoListId,function(t){t(I({status:"loading"})),t(pt({todoListId:a,entityStatus:"loading"})),S(a).then((function(e){e.data.resultCode===c.complete?(t(dt({todoListId:a})),t(pt({todoListId:a,entityStatus:"idle"}))):it(t,e.data)})).catch((function(e){t(v(e.massage))})).finally((function(){t(I({status:"idle"}))}))}))},sx:{margin:"0",padding:"0",position:"relative",left:"230px"},disabled:"loading"===t.entityStatus},o.a.createElement(Ot.a,null)),o.a.createElement(kt,{textStyle:"h6",title:t.title,callBack:d}),o.a.createElement(ht,{addItem:s,disabled:"loading"===t.entityStatus}),o.a.createElement(jt.a,null,i),o.a.createElement(Mt,{filter:t.filter,filteredTasks:r}))})),Kt=o.a.memo((function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.todoLists})),a=Object(l.c)((function(t){return t.tasks})),i=Object(l.c)((function(t){return t.auth.isLoggedIn})),r=Object(n.useCallback)((function(e){t(function(t){return function(e){e(I({status:"loading"})),O(t).then((function(t){t.data.resultCode===c.complete?e(lt({todos:t.data.data.item})):it(e,t.data)})).catch((function(t){e(v(t.massage))})).finally((function(){e(I({status:"idle"}))}))}}(e))}),[t]),s=e.map((function(t){return o.a.createElement(J.a,{item:!0,key:t.id},o.a.createElement(Ht,{todoListId:t.id,entityStatus:t.entityStatus,title:t.title,tasks:a[t.id],filter:t.filter}))}));Object(n.useEffect)((function(){t((function(t){t(I({status:"loading"})),j().then((function(e){t(ft({todos:e.data}))})).catch((function(e){t(v(e.massage))})).finally((function(){t(I({status:"idle"}))}))}))}),[t]);var d=Object(l.c)((function(t){return t.app.status}));return console.log(d),i?o.a.createElement(o.a.Fragment,null,o.a.createElement(It.a,{fixed:!0},o.a.createElement(J.a,{container:!0,sx:{padding:"10px 0 10px "}},o.a.createElement(ht,{addItem:r})),o.a.createElement(J.a,{container:!0,spacing:5},s))):o.a.createElement(at.a,{to:"login"})})),Wt=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.app.isInitialized})),a=Object(l.c)((function(t){return t.app.status}));return Object(n.useEffect)((function(){t((function(t){t(I({status:"loading"})),_().then((function(e){e.data.resultCode===c.complete?(t(q({value:!0})),t(L({isInitialized:!0}))):t(L({isInitialized:!0}))})).catch((function(e){t(v(e.massage))})).finally((function(){t(I({status:"idle"}))}))}))}),[t]),e?o.a.createElement(o.a.Fragment,null,o.a.createElement(M,null),"loading"===a&&o.a.createElement(s.a,null),o.a.createElement(at.d,null,o.a.createElement(at.b,{path:"/",element:o.a.createElement(at.a,{to:"/login"})}),o.a.createElement(at.b,{path:"to-do-lists",element:o.a.createElement(Kt,null)}),o.a.createElement(at.b,{path:"login",element:o.a.createElement(nt,null)}),o.a.createElement(at.b,{path:"404",element:o.a.createElement("h1",null,"404: PAGE NOT FOUND")}),o.a.createElement(at.b,{path:"*",element:o.a.createElement(at.a,{to:"/404"})})),o.a.createElement(G,null)):o.a.createElement("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"}},o.a.createElement(s.a,null))},Gt=a(30),Jt=a(70),Qt=Object(Gt.b)({tasks:Ft,todoLists:ct,app:y,auth:R}),Vt=Object(b.a)({reducer:Qt,middleware:function(t){return t().prepend(Jt.a)}});window.store=Vt;var Yt=a(68);r.a.render(o.a.createElement(l.a,{store:Vt},o.a.createElement(Yt.a,null,o.a.createElement(Wt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[173,1,2]]]);
//# sourceMappingURL=main.dfa09824.chunk.js.map